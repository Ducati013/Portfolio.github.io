<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>R and Python in Rstudio</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="R_python_test_files/libs/clipboard/clipboard.min.js"></script>
<script src="R_python_test_files/libs/quarto-html/quarto.js"></script>
<script src="R_python_test_files/libs/quarto-html/popper.min.js"></script>
<script src="R_python_test_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="R_python_test_files/libs/quarto-html/anchor.min.js"></script>
<link href="R_python_test_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="R_python_test_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="R_python_test_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="R_python_test_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="R_python_test_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body style="background-color:#E7F9DF;" class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">R and Python in Rstudio</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<div class="cell">

</div>




<blockquote class="blockquote">
<p>This document is written in Rstudio with R and python being used in its creation. This task uses raw data from <a href="https://www.zillow.com/research/data/">Zillow’s Home Value Index(all homes-mid-tier)</a>. I begin by doing a few small evaluations with R and compare them to similar functions in python. Both languages perform very well and have nearly the same capabilities for business intelligence. I already provided several documents with R so the primary focus here is on python's capabilities. I produce several graphs with their content and attributes being refined with each new graph.</p>
<h4 id="ultimately-i-ask" class="anchored">Ultimately I ask:</h4>
<h5 id="when-did-north-carolina-suffer-the-worst-housing-price-downturn-in-the-past-20-years-this-question-is-easily-answered-through-the-last-graph." class="anchored">When did North Carolina suffer the worst housing price downturn in the past 20 years? This question is easily answered through the last graph.</h5>
</blockquote>




<section id="read-the-file-with-r-and-assign-to-a-variable." class="level4">
<h4 class="anchored" data-anchor-id="read-the-file-with-r-and-assign-to-a-variable.">Read the file with R and assign to a variable.</h4>
<div class="cell">

</div>
</section>
<section id="evaluating-with-r" class="level1">
<h1>Evaluating with R:</h1>
<section id="we-will-see" class="level4">
<h4 class="anchored" data-anchor-id="we-will-see">We will see:</h4>
<blockquote class="blockquote">
<ul>
<li>The first two columns of the data to see what type of data we are viewing</li>
<li>The last two columns of the data to see if the data is the same, but this usually isn’t necessary.</li>
<li>a statistical summary for the columns.</li>
</ul>
</blockquote>
<blockquote class="blockquote">
<p>We can do a lot more with R but this task is more about what we can do with python.</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(Housing_Zillow,<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  RegionName StateName year       mean_prices
  &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;            &lt;dbl&gt;
1 California CA        2000-01-31      199988
2 California CA        2000-02-29      200838</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(Housing_Zillow,<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  RegionName StateName year       mean_prices
  &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;            &lt;dbl&gt;
1 Wyoming    WY        2022-06-30      321393
2 Wyoming    WY        2022-07-31      323793</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#colnames(Housing_Zillow)  # this is redundant if you are also doing a summary</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> Housing_Zillow</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  RegionName         StateName             year            mean_prices    
 Length:13821       Length:13821       Length:13821       Min.   : 69390  
 Class :character   Class :character   Class :character   1st Qu.:138690  
 Mode  :character   Mode  :character   Mode  :character   Median :187479  
                                                          Mean   :213821  
                                                          3rd Qu.:254413  
                                                          Max.   :909473  
                                                          NA's   :255     </code></pre>
</div>
</div>
</section>
</section>
<section id="python-section" class="level1">
<h1>Python section:</h1>
<blockquote class="blockquote">
<p>This section tests the analysis capabilities for python and R to see if they are roughly the same. The values provided below are to make tidying the data quicker and the interpreting the data faster. This will allow us to create the visualizations and complete the task.</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sklearn  </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> <span class="op">*</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> numpy <span class="im">import</span> nan</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<ul>
<li>This section reads in the data into a data frame.</li>
</ul>
<!-- -->
<ul>
<li><p>We then perform an exploratory statistics analysis</p>
<ul>
<li>Min, Max, Mean</li>
</ul></li>
<li><p>We also look at the dataframe’s general info</p>
<ul>
<li>Shape, Columns, Nulls, Zeros, and another general statistical summary</li>
</ul></li>
</ul>
</blockquote>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>This is a count for how many Nulls are in each column: 
 RegionName       0
StateName        0
year             0
mean_prices    255
dtype: int64</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>This is the Minimum Value for the column 'mean_prices':  69390.0</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>This is the Maximum Value for the column 'mean_prices:  909473.0</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>This is the Rounded Mean Value:  213820.84</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>This is the Dataframe Shape:  (13821, 4)</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>This is the names for the Columns:  Index(['RegionName', 'StateName', 'year', 'mean_prices'], dtype='object')</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 13821 entries, 0 to 13820
Data columns (total 4 columns):
 #   Column       Non-Null Count  Dtype  
---  ------       --------------  -----  
 0   RegionName   13821 non-null  object 
 1   StateName    13821 non-null  object 
 2   year         13821 non-null  object 
 3   mean_prices  13566 non-null  float64
dtypes: float64(1), object(3)
memory usage: 432.0+ KB
Basic info:  None</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>A Statistical Summary for the data: 
          mean_prices
count   13566.000000
mean   213820.844906
std    105532.351446
min     69390.000000
25%    138690.000000
50%    187479.000000
75%    254413.000000
max    909473.000000</code></pre>
</div>
</div>
</section>
<section id="visualizations" class="level1">
<h1>Visualizations:</h1>
<blockquote class="blockquote">
<ul>
<li>This section will take the provided data and produce some graphs that should help decision makers make better decisions.</li>
<li>While each graph is improving upon the last graph these graphs are far from useful.</li>
</ul>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># from plotnine import *   Needed to produce the ggplots</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>(ggplot(df, aes(<span class="st">"year"</span>, <span class="st">"mean_prices"</span>,color<span class="op">=</span><span class="st">"StateName"</span>))<span class="op">+</span> </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>geom_point()<span class="op">+</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>labs(title <span class="op">=</span> <span class="st">"All the States that will fit in one BUSY graph"</span>)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the data for NC</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="R_python_test_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="614"></p>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="op">=</span> df.loc[df[<span class="st">'StateName'</span>] <span class="op">==</span> <span class="st">"NC"</span>]  <span class="co"># this locates a value within a column and saves to new df</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()                                  <span class="co"># creates subplots to overlay plots on top of one another</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>ax.plot(df1[<span class="st">"year"</span>], df1[<span class="st">"mean_prices"</span>])</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"This graph is a little easier to read with just one state to plot,"</span>)                       <span class="co"># this adds a title to the graph</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>plt.xticks(fontweight<span class="op">=</span><span class="st">'bold'</span>, color<span class="op">=</span><span class="st">'blue'</span>, rotation<span class="op">=</span><span class="dv">37</span>)  <span class="co"># This adds a blue color to the x-axis labels and rotates the to 37 degrees</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>plt.show()                                                 <span class="co"># this shows the plot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="R_python_test_files/figure-html/unnamed-chunk-6-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="improving-visualizations" class="level1">
<h1>Improving Visualizations:</h1>
<blockquote class="blockquote">
<p>While the second graph is easier to read, The x-labels make the graph a challenge to interpret to say the least. If I reduce the number of dates on the graph we can focus on a specific region and zoom in on what we need to view. We can focus on one value within a column to provide improved focus if necessary.</p>
</blockquote>
<section id="when-did-north-carolina-suffer-the-worst-housing-price-downturn-in-the-past-20-years" class="level3">
<h3 class="anchored" data-anchor-id="when-did-north-carolina-suffer-the-worst-housing-price-downturn-in-the-past-20-years">When did North Carolina suffer the worst housing price downturn in the past 20 years?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="op">=</span> df.loc[df[<span class="st">'StateName'</span>] <span class="op">==</span> <span class="st">"NC"</span>]   <span class="co"># This chooses a specific state</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>start <span class="op">=</span> <span class="st">"2008-01-31"</span>                    <span class="co"># This chooses which dates to look closer at</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>end <span class="op">=</span> <span class="st">"2013-02-31"</span>                      <span class="co"># This is the end date for closer view of the data</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>mask <span class="op">=</span> (start <span class="op">&lt;</span> df[<span class="st">'year'</span>]) <span class="op">&amp;</span> (df[<span class="st">'year'</span>] <span class="op">&lt;=</span> end) <span class="co"># This sets a beginning and end date </span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>df2<span class="op">=</span>df1.loc[mask]</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>df2[<span class="st">'year'</span>] <span class="op">=</span> pd.to_datetime(df2[<span class="st">'year'</span>])          <span class="co"># converts the year to date time</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>df2[<span class="st">'year'</span>] <span class="op">=</span> df2[<span class="st">'year'</span>].dt.strftime(<span class="st">'%Y-%m'</span>)     <span class="co"># converts the year-month-day to year-month</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Begin visulizations</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>(ggplot(df2, aes(<span class="st">"year"</span>, <span class="st">"mean_prices"</span>, color<span class="op">=</span> <span class="st">"StateName"</span>))<span class="op">+</span> </span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>geom_point()<span class="op">+</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>labs(title<span class="op">=</span><span class="st">"This graph enables us to easily answer the question"</span>)<span class="op">+</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>theme(plot_background<span class="op">=</span>element_rect(fill<span class="op">=</span><span class="st">'gray'</span>),</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>plot_title<span class="op">=</span>element_text(color<span class="op">=</span><span class="st">"salmon"</span>, face<span class="op">=</span><span class="st">"bold"</span>),</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>axis_text_x<span class="op">=</span>element_text(color<span class="op">=</span><span class="st">'blue'</span>, rotation <span class="op">=</span><span class="dv">75</span>,size <span class="op">=</span><span class="dv">7</span>),</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>panel_grid_major_y<span class="op">=</span>element_line(color<span class="op">=</span><span class="st">'black'</span>,size<span class="op">=</span><span class="dv">1</span>,linetype<span class="op">=</span><span class="st">'dashed'</span>),)</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="co">#geom_vline(xintercept = "2008-04-30", linetype = "dashed"),</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="R_python_test_files/figure-html/unnamed-chunk-7-5.png" class="img-fluid" width="614"></p>
</div>
</div>
<div class="cell">

</div>
<p><em>run_time: 13.57 seconds.</em></p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>